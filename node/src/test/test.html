 <!-- <div class="Book-card">
          <div class="thumbnail">
            <img src="odessey.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">The Odyssey</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="21 Lessons for the 21st Century.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">21 Lessons for the 21st Century</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="dogman.gif" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">Dog Man</div>
            <div class="byAuthor">Auther</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="thinkandgrowrich.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">Think and Grow Rich</div>
            <div class="byAuthor">Author name</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="usbornelaw.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">Usborne Law for beginners</div>
            <div class="byAuthor">Author</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="odessey.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">The Odyssey</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="odessey.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">The Odyssey</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="odessey.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">The Odyssey</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="odessey.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">The Odyssey</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div>
        <div class="Book-card">
          <div class="thumbnail">
            <img src="odessey.jpg" class="bookCovers">
          </div>
          <div class="Book-info">
            <div class="title">The Odyssey</div>
            <div class="byAuthor">Homer</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">Channel</div>
            </div>
            <div class="tags">
              <div class="tag">#GreekMythology</div>
              <div class="tag">#Literature</div>
              <div class="tag">#EpicPoetry</div>
            </div>
          </div>
        </div> -->







        const container = document.getElementById('BookContent');
  let currentPage = 1;
  let isLoading = false;
  let cache = {}; // ✅ simple in-memory cache

  // ✅ Skeleton Loader
  function showSkeleton(count = 6) {
    container.innerHTML = "";
    for (let i = 0; i < count; i++) {
      const skeleton = `
        <div class="Book-card skeleton">
          <div class="thumbnail skeleton-box"></div>
          <div class="Book-info">
            <div class="title skeleton-box short"></div>
            <div class="byAuthor skeleton-box shorter"></div>
            <div class="meta skeleton-box tiny"></div>
          </div>
        </div>
      `;
      container.insertAdjacentHTML("beforeend", skeleton);
    }
  }

  // ✅ Render books
  function renderBooks(books, append = false) {
    if (!append) container.innerHTML = "";
    books.forEach(book => {
      const cover = book.cover || "default.jpg";
      const author = book.authors?.length ? book.authors.join(", ") : "No Data";
      const source = book.source || "No Data";
      const tags = (book.categories?.length ? book.categories.slice(0, 4) : ["General"]);

      const card = `
        <div class="Book-card">
          <div class="thumbnail">
            <img src="${cover}" class="bookCovers" loading="lazy">
          </div>
          <div class="Book-info">
            <div class="title">${book.title || "Untitled"}</div>
            <div class="byAuthor">${author}</div>
            <div class="meta">1.2M views · 3 days ago</div>
            <div class="channel">
              <div class="avatar"></div>
              <div class="channel-name">${source}</div>
            </div>
            <div class="tags">
              ${tags.map(tag => `<div class="tag">#${tag}</div>`).join("")}
            </div>
          </div>
        </div>
      `;
      container.insertAdjacentHTML("beforeend", card);
    });
  }

  // ✅ Fetch Books with Cache + Pagination
  async function fetchTrendingBooks(page = 1, append = false) {
    if (isLoading) return;
    isLoading = true;

    // ✅ Check cache first
    if (cache[page]) {
      renderBooks(cache[page], append);
      isLoading = false;
      return;
    }

    if (!append) showSkeleton();

    try {
      const res = await fetch(`https://thebooksourcings.onrender.com/api/trending?page=${page}`);
      const result = await res.json();

      const books = [
        ...(result.data.google || []),
        ...(result.data.gutenberg || []),
        ...(result.data.openLibrary || [])
      ];

      if (books.length === 0 && page === 1) {
        container.innerHTML = `<p>No trending books found right now.</p>`;
      } else {
        cache[page] = books; // ✅ Save to cache
        renderBooks(books, append);
      }
    } catch (err) {
      console.error("Error fetching trending books:", err);
      if (!append) container.innerHTML = `<p>Failed to load books.</p>`;
    } finally {
      isLoading = false;
    }
  }

  // ✅ Infinite Scroll
  window.addEventListener("scroll", () => {
    if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 200) {
      fetchTrendingBooks(++currentPage, true);
    }
  });

  // ✅ Initial Load
  fetchTrendingBooks(currentPage);